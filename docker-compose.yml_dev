version: '2'
services:
  web:
    build: . # build da imagem local
    # image: culturagovbr/salic-web:1.4
    container_name: salic-web-dev
    mem_limit: 1g # limitar espa√ßo do container em memoria
    volumes:
     - ./app:/var/www/salic
     - ./log/apache2:/var/log/apache2
     - ./app/public/txt:/var/www/salic/public/txt/
     - ./app/public/plenaria:/var/www/salic/public/plenaria/
    environment:
     - APPLICATION_ENV=development
     - GIT_REPOSITORY=https://github.com/culturagovbr/salic-minc.git
     - GIT_BRANCH=develop
    restart: always
     - XDEBUG_INSTALL="true"
     #- XDEBUG_CONFIG="remote_host=localhost"
     #- XDEBUG_REMOTE_ENABLE=on
     #- XDEBUG_REMOTE_AUTOSTART=on
     #- XDEBUG_REMOTE_CONNECT_BACK=off
     #- XDEBUG_REMOTE_HANDLER=dbgp
     #- XDEBUG_PROFILER_ENABLE=1
     #- XDEBUG_PROFILER_OUTPUT_DIR=/tmp/www/html
     #- XDEBUG_REMOTE_PORT=9000
     #- XDEBUGINI_PATH=/usr/local/etc/php/conf.d/xdebug.ini
     #- PHP_IDE_CONFIG="serverName=Test"
     #- XDEBUG_DEFAULT_ENABLE = 1
     #- XDEBUG_IDEKEY = "PHPSTORM"
    networks:
      static-network:
        ipv4_address: 172.20.0.3
networks:
   static-network:
    ipam:
      config:
         - subnet: 172.20.0.0/16
           ip_range: 172.28.5.0/24
